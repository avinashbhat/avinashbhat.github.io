---
import publications from '../data/publications.json';

function getLinkText(link: string): string {
  if (link.includes('arxiv.org')) return 'arXiv';
  if (link.includes('acm.org')) return 'ACM DL';
  if (link.includes('escholarship.mcgill.ca')) return 'McGill eScholarship';
  if (link.includes('springer.com')) return 'Springer';
  if (link.includes('.pdf')) return 'PDF';
  return 'Website';
}
---

<ul class="publications-list">
  {publications.map((publication) => {
    const authors = publication.authors.split(',').map(a => a.trim());
    const hasCoauthor = publication.authors.includes('*');

    return (
      <li class="publication-item">
        <div class="pub-year-inline">{publication.year}</div>
        <div class="pub-content">
          <div class="pub-title">
            {publication.title}
          </div>
          <div class="pub-details">
            <div class="pub-authors">
              {authors.map((author, index) => (
                <>
                  {author.includes('Avinash Bhat') ? (
                    <strong>{author}</strong>
                  ) : (
                    <span>{author}</span>
                  )}
                  {index < authors.length - 1 && ', '}
                </>
              ))}
            </div>
            <div class="pub-venue">
              <span class="pub-venue-name">{publication.conference} {publication.year}</span>
              {hasCoauthor && <span class="pub-contribution">*Equal contribution</span>}
              {publication.link && (
                <a href={publication.link} class="pub-link-badge">{getLinkText(publication.link)}</a>
              )}
              {publication.awards && publication.awards.map(award => (
                <span class="pub-award">{award}</span>
              ))}
            </div>
          </div>
        </div>
      </li>
    );
  })}
</ul>
